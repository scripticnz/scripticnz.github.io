<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog-rsses on Scriptic</title>
    <link>http://www.scriptic.co.nz/blog/index.xml</link>
    <description>Recent content in Blog-rsses on Scriptic</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 06 Dec 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://www.scriptic.co.nz/blog/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Simplified Server-side Paging, Sorting, and Filtering with Angular-DataTables and .NET</title>
      <link>http://www.scriptic.co.nz/blog/2016/12/simplified-server-side-paging-sorting-and-filtering-with-angular-datatables-and-net/</link>
      <pubDate>Tue, 06 Dec 2016 00:00:00 +0000</pubDate>
      
      <guid>http://www.scriptic.co.nz/blog/2016/12/simplified-server-side-paging-sorting-and-filtering-with-angular-datatables-and-net/</guid>
      <description>

&lt;h3 id=&#34;introduction&#34;&gt;Introduction.&lt;/h3&gt;

&lt;p&gt;It would be fair to say that I&amp;rsquo;m not a UX designer. I try (sometimes harder than I should) to make things look pretty, but I generally go for a minimalist style in my projects (the &lt;a href=&#34;https://github.com/krisbrooking/stark&#34;&gt;Hugo theme&lt;/a&gt; used for this blog is a good example), if only to reduce the number of hours I would otherwise waste lining my pixels up just right. As a result, I tend to overuse html tables as a medium for information display. And no this doesn&amp;rsquo;t mean my page layouts are table based; I use tables as they were intended - to display rows of data.&lt;/p&gt;

&lt;p&gt;For many years I have used &lt;a href=&#34;https://datatables.net/&#34;&gt;DataTables&lt;/a&gt; to give my HTML tables a few additional controls, including paging, sorting, and filtering. I began using it because it was free, I continue to use it for the most part because it&amp;rsquo;s simple enough and it works. When I build a single page application with tables, I add &lt;a href=&#34;https://l-lin.github.io/angular-datatables/#/welcome&#34;&gt;angular-datatables&lt;/a&gt; on top so that I don&amp;rsquo;t have to deal with jQuery (even if it is still required under the covers).&lt;/p&gt;

&lt;p&gt;If you have a table with a limited number of rows and can afford to send the entire table to the client with every request, DataTables just works. Unfortunately, this is almost never the case for my applications. Instead I usually require some sort of server-side filtering.&lt;/p&gt;

&lt;p&gt;Over the years I have refined the server-side paging, sorting, and filtering code that I use to properly limit the number of rows returned from the database, and seeing as a Google search still returns few examples, I thought it was time to share. I cannot take credit for much of this code. I&amp;rsquo;ll admit that the first time I used it I didn&amp;rsquo;t know (or I guess care) exactly how it worked, but like my minimalist approach to UX, my code has evolved over the years, generally becoming more succinct and easier to maintain. This solution still borrows code (or ideas) from a bunch of places, including from &lt;a href=&#34;https://github.com/mcintyre321/mvc.jquery.datatables&#34;&gt;here&lt;/a&gt;, &lt;a href=&#34;http://stackoverflow.com/questions/23502034/model-binding-new-datatables-1-10-parameters&#34;&gt;here&lt;/a&gt;, and also probably originally &lt;a href=&#34;https://code.google.com/archive/p/datatables-asp-mvc/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If you just want the example project to play with, and like me five years ago you don&amp;rsquo;t care how it works&amp;hellip; &lt;a href=&#34;https://github.com/krisbrooking/datatables-dotnet&#34;&gt;here you go&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;how-it-works&#34;&gt;How It Works.&lt;/h3&gt;

&lt;h4 id=&#34;client-side&#34;&gt;Client side&lt;/h4&gt;

&lt;p&gt;Once all the Angular infrastructure is in place, we can add the HTML/JS code to make the request to the server. The table element needs a few directives that point to configuration objects on the page &lt;code&gt;$scope&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;div ng-controller=&amp;quot;tableController&amp;quot;&amp;gt;
    &amp;lt;table id=&amp;quot;table&amp;quot; datatable=&amp;quot;&amp;quot; dt-options=&amp;quot;dtOptions&amp;quot; dt-columns=&amp;quot;dtColumns&amp;quot; class=&amp;quot;row-border hover&amp;quot;&amp;gt;&amp;lt;/table&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As you can see, this will make a GET request to /api/users. There are more server-side options, but these are the ones that I typically start with.  &lt;code&gt;$scope.dtColumns&lt;/code&gt; should match the object properties that are sent back to the page.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;$scope.dtOptions = DTOptionsBuilder
    .newOptions()
    .withOption(&#39;ajax&#39;, {
        dataSrc: &amp;quot;data&amp;quot;,
        url: &#39;/api/users&#39;,
        type: &amp;quot;GET&amp;quot;
    })
    .withDataProp(&#39;data&#39;) // Property in the returned object which contains the actual data
    .withOption(&#39;processing&#39;, true)
    .withOption(&#39;serverSide&#39;, true)
    .withOption(&#39;paging&#39;, true)
    .withOption(&#39;autoWidth&#39;, false);

$scope.dtColumns = [
    DTColumnBuilder.newColumn(&#39;id&#39;),
    DTColumnBuilder.newColumn(&#39;name&#39;)
];
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;model-binding&#34;&gt;Model Binding&lt;/h4&gt;

&lt;p&gt;The &lt;a href=&#34;https://datatables.net/manual/server-side&#34;&gt;request object&lt;/a&gt; that DataTables sends to the server is relatively complicated. I borrowed the model and model binder for the current version of DataTables (1.10) from &lt;a href=&#34;http://stackoverflow.com/questions/23502034/model-binding-new-datatables-1-10-parameters&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If we add the ModelBinder as an attribute for the controller action, magic happens, and we have all of the DataTables request info in an object that we can later use to filter data.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-csharp&#34;&gt;[HttpGet]
[Route(&amp;quot;/api/users&amp;quot;)]
public IActionResult GetUsers([ModelBinder(BinderType = typeof(DataTablesModelBinder))] DTParameterModel model)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-controller&#34;&gt;The Controller&lt;/h4&gt;

&lt;p&gt;In order to filter the data efficiently we want to use a Queryable as opposed to an Enumerable object. We want to modify the query before it is invoked and the data is returned. This way, we can query for exactly the data that we need, and not make the database do any more work than it has to. In this example I&amp;rsquo;m using Linq to Objects, but it will work the same way if your data is coming from another source such as a database.&lt;/p&gt;

&lt;p&gt;The idea is that you pass your &lt;code&gt;DataTablesParameterModel&lt;/code&gt;, your dataset as a queryable, and a transform (the DTO to return to the page) to the Create method and it gives you back the object that DataTables on the client expects to see.&lt;/p&gt;

&lt;p&gt;I have wired up some .NET Core style DI using open-generics so that I don&amp;rsquo;t have to duplicate it every time I need a new table.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-csharp&#34;&gt;services.AddScoped(typeof(IDataTablesQueryable&amp;lt;,&amp;gt;), typeof(DataTablesQueryable&amp;lt;,&amp;gt;));
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-csharp&#34;&gt;public class UsersController : Controller
{
    private readonly IDataTablesQueryable&amp;lt;User, UserDTO&amp;gt; _usersDataTable;

    public UsersController(IDataTablesQueryable&amp;lt;User, UserDTO&amp;gt; usersDataTable)
    {
        _usersDataTable = usersDataTable;
    }

    [HttpGet]
    [Route(&amp;quot;/api/users&amp;quot;)]
    public IActionResult GetUsers([ModelBinder(BinderType = typeof(DataTablesModelBinder))] DTParameterModel model)
    {
        var users = new List&amp;lt;User&amp;gt;
        {
            new User() { Id = 1, Name = &amp;quot;Emma&amp;quot; },
            new User() { Id = 2, Name = &amp;quot;Noah&amp;quot; },
            new User() { Id = 3, Name = &amp;quot;Olivia&amp;quot; },
            new User() { Id = 4, Name = &amp;quot;Liam&amp;quot; },
            new User() { Id = 5, Name = &amp;quot;Sophia&amp;quot; },
            new User() { Id = 6, Name = &amp;quot;Mason&amp;quot; },
            new User() { Id = 7, Name = &amp;quot;Ava&amp;quot; },
            new User() { Id = 8, Name = &amp;quot;Jacob&amp;quot; },
            new User() { Id = 9, Name = &amp;quot;Isabella&amp;quot; },
            new User() { Id = 10, Name = &amp;quot;William&amp;quot; }
        };

        var queryable = users.AsQueryable();

        var dataTablesModel = _usersDataTable.Create(model, queryable, user =&amp;gt; new UserDTO { id = user.Id, name = user.Name });

        return Ok(dataTablesModel);
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;the-iqueryable-filter&#34;&gt;The IQueryable Filter&lt;/h4&gt;

&lt;p&gt;Again, this code is heavily inspired by &lt;a href=&#34;https://github.com/mcintyre321/mvc.jquery.datatables&#34;&gt;this&lt;/a&gt;, but has been cleaned up and simplified.&lt;/p&gt;

&lt;p&gt;So what is actually happening?&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;The Filter method is passed the DataTables parameters, and the queryable with the transform which projects the result as the DTO (TResult).&lt;/li&gt;
&lt;li&gt;The Filter method uses the DataTables parameters to add filters to the query. The first is a string search based on &lt;code&gt;dtParameters.Columns.Searchable&lt;/code&gt;. The second is a sort filter based on &lt;code&gt;dtParameters.Order&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The query is again modified to take only the relevant page of data.&lt;/li&gt;
&lt;li&gt;The queries (&lt;code&gt;queryable.Count()&lt;/code&gt;, &lt;code&gt;filteredData.Count()&lt;/code&gt;, and &lt;code&gt;page&lt;/code&gt;) are finally invoked and the relevant data is returned to the caller in the DataTablesModel object.&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&#34;language-csharp&#34;&gt;public interface IDataTablesQueryable&amp;lt;TModel, TResult&amp;gt;
{
    DataTablesModel Create(DTParameterModel parameters, IQueryable&amp;lt;TModel&amp;gt; queryable, Expression&amp;lt;Func&amp;lt;TModel, TResult&amp;gt;&amp;gt; transform);
}

public class DataTablesQueryable&amp;lt;TModel, TResult&amp;gt; : IDataTablesQueryable&amp;lt;TModel, TResult&amp;gt;
{
    public DataTablesModel Create(DTParameterModel parameters, IQueryable&amp;lt;TModel&amp;gt; queryable, Expression&amp;lt;Func&amp;lt;TModel, TResult&amp;gt;&amp;gt; transform)
    {
        var model = new DataTablesModel();

        // 1. The Filter method is passed the DataTables parameters, and the queryable with the transform which projects the result as the DTO (TResult).
        var filteredData = Filter(parameters, queryable.Select(transform));

        // 3. The query is again modified to take only the relevant page of data.
        var page = filteredData.Skip(parameters.Start);
        if (parameters.Length &amp;gt; -1)
        {
            page = page.Take(parameters.Length);
        }

        // 4. The queries are finally invoked and the relevant data is returned to the caller in the DataTablesModel object.
        model.draw = parameters.Draw;
        model.recordsTotal = queryable.Count();
        model.recordsFiltered = filteredData.Count();
        model.data = ((IQueryable&amp;lt;object&amp;gt;)page).ToArray();

        return model;
    }

    // 2. The Filter method uses the DataTables parameters to add filters to the query.
    public IQueryable&amp;lt;T&amp;gt; Filter&amp;lt;T&amp;gt;(DTParameterModel dtParameters, IQueryable&amp;lt;T&amp;gt; data)
    {
        var columns = typeof(T).GetProperties().ToArray();

        // The first is a string search based on dtParameters.Columns.Searchable.
        if (!string.IsNullOrEmpty(dtParameters.Search.Value))
        {
            var filterParts = new List&amp;lt;string&amp;gt;();
            foreach (var column in dtParameters.Columns.Where(x =&amp;gt; !string.IsNullOrEmpty(x.Data)))
            {
                if (column.Searchable)
                {
                    var filter = string.Format(&amp;quot;{0}.ToString().ToLower().Contains(\&amp;quot;{1}\&amp;quot;)&amp;quot;, 
                        columns.First(x =&amp;gt; x.Name == column.Data).Name, 
                        dtParameters.Search.Value.ToLower().Replace(&amp;quot;\&amp;quot;&amp;quot;, &amp;quot;\&amp;quot;\&amp;quot;&amp;quot;));

                    filterParts.Add(filter);
                }
            }
            data = data.Where(string.Join(&amp;quot; or &amp;quot;, filterParts));
        }

        // The second is a sort filter based on dtParameters.Order.
        string sortString = dtParameters.Order.Count() &amp;gt; 0 ? 
            string.Join(&amp;quot;, &amp;quot;, dtParameters.Order.Select(x =&amp;gt; string.Format(&amp;quot;{0} {1}&amp;quot;, columns[x.Column].Name, x.Dir))) : 
            columns[0].Name;

        data = data.OrderBy(sortString);

        return data;
    }
}

public class DataTablesModel
{
    public int draw { get; set; }

    public int recordsFiltered { get; set; }

    public int recordsTotal { get; set; }

    public object[] data { get; set; }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;so-how-does-this-help-me&#34;&gt;So How Does This Help Me?&lt;/h3&gt;

&lt;p&gt;This example provides the infrastructure to start a new project, however, by itself it isn&amp;rsquo;t super useful. This solution really shines when we retrieve data from a database and want to optimally craft each SQL query. I haven&amp;rsquo;t included code for this because of current compatibility issues. As of this writing we are stuck in the middle of two versions of Entity Framework, neither of which satisfies all the requirements of this example when building for .NET Core. EF Core doesn&amp;rsquo;t yet support all of the IQueryable bits required, and EF6 requires a separate non .NET Core library. It all gets a bit messy, so instead of including code I will show the resulting SQL queries that a database would receive.&lt;/p&gt;

&lt;p&gt;First let&amp;rsquo;s see what gets sent to the database when there is no filtering. First thing you might notice is that the first two queries are exactly the same - this will change when we filter the data by entering a search string.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;-- Get the total record count
SELECT [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[Users] AS [Extent1]
    )  AS [GroupBy1]

-- Get the filtered record count
SELECT [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[Users] AS [Extent1]
    )  AS [GroupBy1]

-- Get the first page of data
SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name]
    FROM [dbo].[Users] AS [Extent1]
    ORDER BY [Extent1].[Id] ASC
    OFFSET 0 ROWS FETCH NEXT 10 ROWS ONLY 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If I search for &amp;ldquo;liam&amp;rdquo;, the following SQL is generated. As can be seen, the second and third queries change to reflect the filter. You might notice that Id is cast to nvarchar. Generally I will tell datatables to exclude the Id column from the search and this won&amp;rsquo;t be included in the generated SQL. But this does illustrate a limitation with this solution; every data type will be treated as a string. A solution to this limitation already exists &lt;a href=&#34;https://github.com/mcintyre321/mvc.jquery.datatables&#34;&gt;here&lt;/a&gt;. Again, my solution works for me in the majority of cases.&lt;/p&gt;

&lt;p&gt;I won&amp;rsquo;t claim that this is the most efficient way to query the database, there may be a more optimal SQL query (eliminating the duplicate query above is an obvious start), but this is clearly much better than asking the database for every row in the table and performing the filtering in memory.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sql&#34;&gt;-- Get the total record count
SELECT [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[Users] AS [Extent1]
    )  AS [GroupBy1]

-- Get the filtered record count
SELECT [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[Users] AS [Extent1]
        WHERE (LOWER( CAST( [Extent1].[Id] AS nvarchar(max))) LIKE N&#39;%liam%&#39;) OR (LOWER(CASE WHEN ([Extent1].[Name] IS NULL) THEN N&#39;&#39; ELSE [Extent1].[Name] END) LIKE N&#39;%liam%&#39;)
    )  AS [GroupBy1]

-- Get the first page of data
SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name]
    FROM [dbo].[Users] AS [Extent1]
    WHERE (LOWER( CAST( [Extent1].[Id] AS nvarchar(max))) LIKE N&#39;%liam%&#39;) OR (LOWER(CASE WHEN ([Extent1].[Name] IS NULL) THEN N&#39;&#39; ELSE [Extent1].[Name] END) LIKE N&#39;%liam%&#39;)
    ORDER BY [Extent1].[Id] ASC
    OFFSET 0 ROWS FETCH NEXT 10 ROWS ONLY 
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Publishing a .NET Core Console Application as an Azure Web Job from Visual Studio</title>
      <link>http://www.scriptic.co.nz/blog/2016/11/publishing-a-net-core-console-application-as-an-azure-web-job-from-visual-studio/</link>
      <pubDate>Thu, 03 Nov 2016 00:00:00 +0000</pubDate>
      
      <guid>http://www.scriptic.co.nz/blog/2016/11/publishing-a-net-core-console-application-as-an-azure-web-job-from-visual-studio/</guid>
      <description>

&lt;h3 id=&#34;introduction&#34;&gt;Introduction.&lt;/h3&gt;

&lt;p&gt;Azure web Jobs are super useful for long-running or low priority tasks that need to be run in the background of a web application. They are a light weight alternative to worker roles or virtual machines.&lt;/p&gt;

&lt;p&gt;With the knowledge that it is a supported scenario, I decided to experiment with using a .NET Core console application. I had absolutely no problems getting the application to run as a Web Job. However, I quickly noticed that the tooling to allow publishing of a .NET Core console application as an Azure Web Job is currently missing from Visual Studio.&lt;/p&gt;

&lt;p&gt;This isn&amp;rsquo;t a big deal if you happen to have a web application in your VS solution. In that case we can copy the binaries for the console application under &lt;code&gt;\App_Data\Jobs\{Triggered|Continuous}\{Job Name}&lt;/code&gt;. Then when we publish our web application, the Web Job is automatically created along side.&lt;/p&gt;

&lt;h3 id=&#34;publishing-script&#34;&gt;Publishing Script.&lt;/h3&gt;

&lt;p&gt;If there is no web application in the solution, we can still deploy the Web Job using WebDeploy. The way I did this was to bolt on to the end of the PowerShell script that&amp;rsquo;s generated with a new publish profile. To begin, create a new publish profile and set the &amp;ldquo;Publish Target&amp;rdquo; to &amp;ldquo;File System&amp;rdquo; (currently the only option). In Visual Studio navigate to Properties -&amp;gt; PublishProfiles and open the .ps1 script. It should look something like this.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;[cmdletbinding(SupportsShouldProcess=$true)]
param($publishProperties=@{}, $packOutput, $pubProfilePath)

# to learn more about this file visit https://go.microsoft.com/fwlink/?LinkId=524327

try{
    if ($publishProperties[&#39;ProjectGuid&#39;] -eq $null){
        $publishProperties[&#39;ProjectGuid&#39;] = &#39;f535e246-be7e-476e-88c1-59f220079721&#39;
    }

    $publishModulePath = Join-Path (Split-Path $MyInvocation.MyCommand.Path) &#39;publish-module.psm1&#39;
    Import-Module $publishModulePath -DisableNameChecking -Force

    # call Publish-AspNet to perform the publish operation
    Publish-AspNet -publishProperties $publishProperties -packOutput $packOutput -pubProfilePath $pubProfilePath
}
catch{
    &amp;quot;An error occurred during publish.`n{0}&amp;quot; -f $_.Exception.Message | Write-Error
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can modify the script so that after publishing the binaries they are deployed to Azure. This involves a couple of steps.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;We need to Zip all of the files up into an archive - this is the format that Azure expects.&lt;/li&gt;
&lt;li&gt;We need to push the Zip file up to Azure. The destination depends on the type of Web Job we are creating but looks something like &lt;code&gt;\App_Data\Jobs\Triggered\BackgroundJob&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The part of the script that does the deployment requires a couple things. First is a copy of &lt;a href=&#34;https://github.com/davidebbo/WAWSDeploy&#34;&gt;WAWSDeploy&lt;/a&gt;, a handy wrapper around WebDeploy. Second is the PublishSettings file for the App Service. This can be downloaded from &lt;a href=&#34;https://portal.azure.com&#34;&gt;Azure&lt;/a&gt; by navigating to the App Service -&amp;gt; Overview and clicking &amp;ldquo;Get publish profile&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;If you are going to do this, it is &lt;strong&gt;VERY IMPORTANT&lt;/strong&gt; that you remember to keep the PublishSettings file outside of your solution so that it doesn&amp;rsquo;t get pushed to your git repo - it contains your App Service secrets in plain text.&lt;/p&gt;

&lt;p&gt;After the line calling Publish-AspNet, append the following. Modify the last line for your environment. Now every time you right click your project and publish, the binaries will be WebDeployed up to Azure. You can even see the result of this in the Visual Studio Output window.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;# Find the Root Namespace by reading the .xproj file
$projectFile = Get-ChildItem -Filter *.xproj | Select-Object -First 1
$xml = [xml](Get-Content $projectFile)
$node = $xml.Project.PropertyGroup | Where-Object { $_.Label -eq &amp;quot;Globals&amp;quot; } | Select-Object RootNamespace

# Build paths for the Zip file
$source = Join-Path $publishProperties[&amp;quot;publishUrl&amp;quot;] &amp;quot;*&amp;quot;
$destination = Join-Path (Split-Path $publishProperties[&amp;quot;publishUrl&amp;quot;]) &amp;quot;$($node.RootNamespace).zip&amp;quot;

Echo &amp;quot;Creating Zip file from executable&amp;quot;
Compress-Archive -Path $source -DestinationPath $destination -Force

WAWSDeploy.exe $destination &amp;quot;C:\Users\%USERNAME%\Documents\myapp.azurewebsites.net.PublishSettings&amp;quot; /t &amp;quot;app_data\jobs\triggered\$($node.RootNamespace)&amp;quot; /v
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Using Python Tools for Visual Studio to debug a Google App Engine project</title>
      <link>http://www.scriptic.co.nz/blog/2016/10/using-python-tools-for-visual-studio-to-debug-a-google-app-engine-project/</link>
      <pubDate>Mon, 10 Oct 2016 00:00:00 +0000</pubDate>
      
      <guid>http://www.scriptic.co.nz/blog/2016/10/using-python-tools-for-visual-studio-to-debug-a-google-app-engine-project/</guid>
      <description>

&lt;h3 id=&#34;general-setup&#34;&gt;General Setup.&lt;/h3&gt;

&lt;p&gt;First we need to install the following packages&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Microsoft/PTVS&#34;&gt;Python Tools for Visual Studio&lt;/a&gt; which is now included in the list of features when running setup.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.python.org&#34;&gt;Python 2.7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.google.com/appengine/downloads&#34;&gt;Google App Engine SDK for Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Next, create a Python project, create a virtual environment, and install the ptvsd python package.&lt;/p&gt;

&lt;p&gt;Right click the project file -&amp;gt; Properties, and make the following changes.&lt;/p&gt;

&lt;p&gt;General&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Startup File: C:\Program Files (x86)\Google\google_appengine\dev_appserver.py OR C:\Program Files (x86)\Google\Cloud SDK\google-cloud-sdk\bin\dev_appserver.py OR similar&lt;/li&gt;
&lt;li&gt;Working Directory: .&lt;/li&gt;
&lt;li&gt;Interpreter: Env (Python 2.7)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Debug&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Launch Mode: Standard Python Launcher&lt;/li&gt;
&lt;li&gt;Script Arguments: &amp;ndash;python_startup_script=&amp;ldquo;.\pydevd_startup.py&amp;rdquo; &amp;ndash;automatic_restart=no &amp;ndash;max_module_instances=&amp;ldquo;default:1&amp;rdquo; &amp;ldquo;.\app.yaml&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;add-project-files&#34;&gt;Add project files.&lt;/h3&gt;

&lt;p&gt;An empty Flask project that is also configured for GAE can be found &lt;a href=&#34;https://github.com/krisbrooking/parched&#34;&gt;here&lt;/a&gt;. Prior to running the solution, it is necessary to add a virtual environment named &amp;ldquo;env&amp;rdquo;, and install &amp;ldquo;Flask&amp;rdquo; and &amp;ldquo;ptvsd&amp;rdquo;.&lt;/p&gt;

&lt;h4 id=&#34;pydevd-startup-py&#34;&gt;pydevd_startup.py&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import ptvsd
ptvsd.enable_attach(secret = &#39;secret&#39;)
ptvsd.wait_for_attach()
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;debugging&#34;&gt;Debugging.&lt;/h3&gt;

&lt;p&gt;Start the project by pressing F5. The GAE dev server should start, however the debugger is not yet attached to the process.&lt;/p&gt;

&lt;p&gt;From the Debug menu click &amp;ldquo;Attach to Process&amp;hellip;&amp;rdquo;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Select &amp;ldquo;Python remote (ptvsd)&amp;rdquo; as the Transport&lt;/li&gt;
&lt;li&gt;Enter &lt;code&gt;tcp@//secret@localhost:5678&lt;/code&gt; as the Qualifier.&lt;/li&gt;
&lt;li&gt;Press Enter to find the process, and Enter again to attach the debugger to it.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NB: If you click the Find button you will receive the following error because Python Tools has not implemented the find dialog.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/scripticnz/scripticnz.github.io/master/blog/images/port-selector-error.PNG&#34; alt=&#34;Error&#34; title=&#34;Error&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>